(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{HTMLElementExtended:()=>a,Page:()=>r,enableLinkIntercepts:()=>b,registerPage:()=>T});class r{pageTitle;routes=[];#e;#t;constructor(e,t){this.pageTitle=e,this.routes=t}get searchParameters(){return this.#t}get urlParameters(){return this.#e}connectedCallback(){}disconnectedCallback(){}async beforeRender(){}async afterRender(){}template(){return""}renderTemplateString(e=""){return new Function("page",`return \`${e}\`;`).call(this,this)}escape(e){return e.replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}async render(){const e=document.querySelector("page-content");if(!e)throw Error("Could not find <page-content>");await this.beforeRender(),e.innerHTML=this.template.call(this,this),document.querySelector("title").innerText=this.pageTitle,await this.afterRender()}_setUrlData(e={urlParameters:{},searchParameters:{}}){this.#e=e?.urlParameters||{},this.#t=e?.searchParameters||{}}}const n={};class a extends HTMLElement{useShadowRoot=!1;useTemplate=!0;#r=!1;#n;#a;#s=!this.template.toString().includes('template(){return""}');#o=this;#i=function(e){return Array.from(e).reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0)}(this.constructor.toString());constructor(){var e;super(),this.#s&&(e=()=>{this.#c(),this.render()},o.push(e),!1===i&&(l.observe(s,{characterData:!0}),i=!0,s.data=c++))}get rendered(){return this.#r}connectedCallback(){}disconnectedCallback(){}template(){return""}renderTemplateString(e=""){return new Function(`return \`${e}\`;`).call(this)}beforeRender(){}afterRender(){}render(){this.#r&&this.beforeRender(),this.useTemplate||(this.#a.innerHTML=this.template()),this.#o.replaceChildren(this.#a.content.cloneNode(!0)),this.#r=!0,this.afterRender()}stringifyStyleSheet(e){return e?[...e.cssRules].map((e=>e.cssText)).join("\n"):""}#c(){this.#n=this.template(),this.useTemplate?(n[this.#i]||(n[this.#i]=document.createElement("template"),n[this.#i].innerHTML=this.#n),this.#a=n[this.#i]):this.#a=document.createElement("template"),this.useShadowRoot?(this.attachShadow({mode:"open"}),this.#o=this.shadowRoot):this.#o=this}}const s=document.createTextNode("");let o=[],i=!1,c=0;const l=new MutationObserver((()=>{for(;o.length;)o.pop()();l.disconnect(),i=!1})),h=/\/:|\*/g,d=/([:*])(\w+)/g,u=/\*/g,p="(?:.*)",m="(?:/$|$)",g="(#(.*))?",w=[];let f,E;function b(){window.paxCoreLinkIntercepts=!0,document.addEventListener("click",(e=>{if(e.target.matches("[href]"))if(e.target.getAttribute("href").includes("://")){const t=e.target.getAttribute("target");["_blank","_self","_parent","_top"].includes(t)&&window.open(e.target.getAttribute("href"),t).focus()}else e.preventDefault(),P(new URL(e.target.href)),e.target.blur()}))}function T(e,t,r=!1){(t=[...new Set([t,...e.routes||[]])].map((e=>`/${e.replace(/\/$/,"").replace(/^\//,"")}`)))?(t.forEach((t=>{const r=function(e){let t;return t=null===e.match(h)?"/"===e.trim()||e.includes("#")?new RegExp(`^${e}$`):new RegExp(`^${e}${g}$`):new RegExp(`^${e.replace(d,((e,t,r)=>`(?<${r}>[^/]+)`)).replace(u,p)}${m}$`,""),t}(t);w.push({route:t,routeRegex:r,pageClass:e.constructor}),null!==location.pathname.match(r)&&P(location)})),r&&(f={pageClass:e.constructor}),clearTimeout(E),E=setTimeout((()=>{E=void 0,!window.page&&f&&P(location)}),0)):console.warn("No routes provided for page")}function P(e,t=!1){const r=e.href.replace(e.origin,""),n=window.page;let a=function(e){const t=w.find((({routeRegex:t})=>null!==e.match(t)));if(!t)return;const r=e.match(t.routeRegex),n=Object.fromEntries(new URLSearchParams(location.search.split(/\?(.*)?$/).slice(1).join("")).entries());return{...t,urlParameters:r.groups,searchParameters:n}}(r);const s=n?.constructor===a?.pageClass,o=s&&e.hash===location.hash;if(!a){if(!f)return void console.warn(`No page found for url: ${r}`);a=f}if(0==t&&s)return void(o||(window.history.pushState({},"",r),e.hash&&!o&&window.dispatchEvent(new Event("hashchange"))));const i=a.pageClass?new a.pageClass:{},c=function(e){return e===location.href.replace(location.origin,"")||e===location.href||e===location.pathname}(r);c?!0===t&&setTimeout((()=>{window.dispatchEvent(new Event("locationchange"))}),0):(window.history.pushState({},"",r),window.dispatchEvent(new Event("locationchange"))),e.hash&&!o&&window.dispatchEvent(new Event("hashchange")),!0===t&&location.hash&&setTimeout((()=>{window.dispatchEvent(new Event("hashchange"))}),0),n&&n.disconnectedCallback(),window.page=i,i._setUrlData({urlParameters:a.urlParameters,searchParameters:a.searchParameters||{}}),i.render(),document.body.scrollTop=0,document.documentElement.scrollTop=0,i.connectedCallback()}window.addEventListener("popstate",(e=>{P(new URL(e.currentTarget.location),!0)}))})();
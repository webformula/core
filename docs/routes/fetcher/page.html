<h3 class="page-title">Fetcher</h3>
<div class="page-subheader mdw-font-title-medium">Extension on fetch that includes interceptors</div>


<section class="page-content-section">
  <div class="page-content-container">
    <mdw-card id="pagejs">
      <div class="mdw-card-content">
        <div class="mdw-headline">Fetcher</div>
      </div>
    
      <pre>
        <code class="language-javascript">
  ${page.escape(`import { fetcher, createFetcher } from '@webformula/core';

  /** Main fetcher */
  
  // called on 401
  fetcher('/get', { interceptors: {
    auth(config) {
      config.headers.Authorization = 'Bearer token';
      return config;
    },
    before(config) {
      config.headers.Authorization = 'Bearer token';
      return config;
    }
  });



  /** Fetcher instance */
  
  // global config for all instance requests
  const fetcherInstance = createFetcher({
    baseUrl: '',
    headers: {
      Authorization: 'Bearer token'
    },
    interceptors: {
      auth(config) {
        config.headers.Authorization = 'Bearer token';
        return config;
      },
      before(config) {
        config.headers.Authorization = 'Bearer token';
        return config;
      }
    }
  });
  
  fetcherInstance('/get');
  
  // request specific interceptors
  fetcherInstance('/get', {}, interceptors: {
    auth(config) {
      config.headers.Authorization = 'Bearer token';
      return config;
    },
    before(config) {
      config.headers.Authorization = 'Bearer token';
      return config;
    }
  });`)}
        </code>
      </pre>
    </mdw-card>
  </div>
</section>
